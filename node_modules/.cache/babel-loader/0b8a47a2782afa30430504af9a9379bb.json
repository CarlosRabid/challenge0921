{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\corne\\\\Unsyncro\\\\WorkOfficeFREE\\\\CodingLab\\\\challenge0921\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"C:\\\\Users\\\\corne\\\\Unsyncro\\\\WorkOfficeFREE\\\\CodingLab\\\\challenge0921\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\corne\\\\Unsyncro\\\\WorkOfficeFREE\\\\CodingLab\\\\challenge0921\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"C:\\\\Users\\\\corne\\\\Unsyncro\\\\WorkOfficeFREE\\\\CodingLab\\\\challenge0921\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:\\\\Users\\\\corne\\\\Unsyncro\\\\WorkOfficeFREE\\\\CodingLab\\\\challenge0921\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\corne\\\\Unsyncro\\\\WorkOfficeFREE\\\\CodingLab\\\\challenge0921\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\corne\\\\Unsyncro\\\\WorkOfficeFREE\\\\CodingLab\\\\challenge0921\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\corne\\\\Unsyncro\\\\WorkOfficeFREE\\\\CodingLab\\\\challenge0921\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\corne\\\\Unsyncro\\\\WorkOfficeFREE\\\\CodingLab\\\\challenge0921\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{ComposedChart,Bar,XAxis,YAxis,ResponsiveContainer,Tooltip,Legend,Line}from'recharts';import moment from'moment';import Axios from'axios';import ChartFilters from'./ChartFilters';import'../../styles/analytics.css';import*as constant from'../Form/constant';import Loader from'../Loader';var dinamicRoute=window.location.host.includes(\"localhost\")?constant.LOCAL_GET:constant.PROD_GET;var DynamicChart=/*#__PURE__*/function(_Component){_inherits(DynamicChart,_Component);var _super=_createSuper(DynamicChart);function DynamicChart(props){var _this;_classCallCheck(this,DynamicChart);_this=_super.call(this,props);_this.convertDate=function(date,group){var fd;var newDate;if(group===\"day\"){fd=date*(1000*60*60*24);newDate=moment(fd).format(\"MMMM Do YYYY\");}else if(group===\"month\"){date=parseInt(date);var addYear=Math.floor(date/12);var toMultiply=date%12/12;var year=1970+addYear;var month=Math.ceil(toMultiply*12)+1;newDate=month+\" \"+year;}else if(group===\"year\"){newDate=JSON.parse(date)+1970;}else if(group===\"week\"){fd=date*(1000*60*60*24*7);newDate=moment(fd).format('w YYYY');}return newDate;};_this.getRelevantData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(filters){var group,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!filters){filters={};}group=_this.state.time;_this.setState({loadingData:true});_context.next=5;return Axios.post(\"\".concat(dinamicRoute,\"/formData/\").concat(group),filters);case 5:response=_context.sent;setTimeout(function(){//for presentation only\n_this.setState({data:response.data.map(function(d){return _objectSpread(_objectSpread({},d),{},{moonPhase:_this.getMoonphases(d.moonPhase),date:_this.convertDate(d.date,group)});}),loadingData:false});},1500);case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _this$setState;var data,name,newData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data=_toConsumableArray(_this.state.data);name=e.target.name;newData=data.splice(0);// Only for User Experience purposes (to force chart to reanimate)\n_context2.next=5;return _this.setState((_this$setState={},_defineProperty(_this$setState,name,e.target.value),_defineProperty(_this$setState,\"data\",newData),_this$setState));case 5:_this.getRelevantData();case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.getMoonphases=function(data){var moonphase;if(data===\"Full Moon\"){return moonphase=4;}else if(data===\"Third Quarter\"){return moonphase=3;}else if(data===\"New Moon\"){return moonphase=2;}else if(data===\"First Quarter\"){return moonphase=1;}else{return moonphase=null;}};_this.state={data:[],countBy:\"turtleCount\",time:\"day\"};_this.loadingData=true;_this.dinamicRoute=props.dinamicRoute;return _this;}_createClass(DynamicChart,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.getRelevantData();case 2:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var countOptions=[\"turtleCount\",\"nestCount\",\"eggCount\"];var timeOptions=[\"day\",\"week\",\"month\",\"year\"];var notShowingMoonPhases;return/*#__PURE__*/React.createElement(\"div\",{className:\"analytics-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"analytics-area\",style:{width:'100vw',height:'70%'}},/*#__PURE__*/React.createElement(\"h3\",null,\"Count: \"),/*#__PURE__*/React.createElement(\"select\",{className:\"a-select\",id:\"countBy\",name:\"countBy\",value:this.state.countBy,onChange:this.handleChange},countOptions.map(function(o){return/*#__PURE__*/React.createElement(\"option\",{value:o},o);})),/*#__PURE__*/React.createElement(\"select\",{className:\"a-select\",id:\"time\",name:\"time\",value:this.state.time,onChange:this.handleChange},timeOptions.map(function(o){return/*#__PURE__*/React.createElement(\"option\",{value:o},o);})),this.state.loadingData?/*#__PURE__*/React.createElement(Loader,null):null,/*#__PURE__*/React.createElement(ResponsiveContainer,{width:\"100%\"},/*#__PURE__*/React.createElement(ComposedChart,{width:600,height:300,data:this.state.data,margin:{top:20,right:30,left:20,bottom:5}},/*#__PURE__*/React.createElement(XAxis,{dataKey:\"date\",stroke:\"black\"}),/*#__PURE__*/React.createElement(YAxis,{yAxisId:\"left\",orientation:\"left\",stroke:\"rgba(239, 221, 111)\"}),this.state.time===\"day\"?/*#__PURE__*/React.createElement(YAxis,{yAxisId:\"right\",orientation:\"right\",stroke:\"#81C14B\"}):notShowingMoonPhases=true,/*#__PURE__*/React.createElement(Tooltip,null),/*#__PURE__*/React.createElement(Legend,{color:\"#FFFFFF\"}),/*#__PURE__*/React.createElement(Bar,{yAxisId:\"left\",dataKey:this.state.countBy,fill:\"rgba(239, 221, 111, 0.8)\"}),this.state.time===\"day\"?/*#__PURE__*/React.createElement(Line,{strokeWidth:4,stroke:\"rgba(129, 193, 75, 0.7)\",type:\"monotone\",yAxisId:\"right\",dataKey:\"moonPhase\",fill:\"#82ca9d\"}):notShowingMoonPhases=true))),/*#__PURE__*/React.createElement(ChartFilters,{getRelevantData:this.getRelevantData}));}}]);return DynamicChart;}(Component);export default DynamicChart;","map":{"version":3,"sources":["C:/Users/corne/Unsyncro/WorkOfficeFREE/CodingLab/challenge0921/src/Components/Analytics/DynamicChart.js"],"names":["React","Component","ComposedChart","Bar","XAxis","YAxis","ResponsiveContainer","Tooltip","Legend","Line","moment","Axios","ChartFilters","constant","Loader","dinamicRoute","window","location","host","includes","LOCAL_GET","PROD_GET","DynamicChart","props","convertDate","date","group","fd","newDate","format","parseInt","addYear","Math","floor","toMultiply","year","month","ceil","JSON","parse","getRelevantData","filters","state","time","setState","loadingData","post","response","setTimeout","data","map","d","moonPhase","getMoonphases","handleChange","e","name","target","newData","splice","value","moonphase","countBy","countOptions","timeOptions","notShowingMoonPhases","width","height","o","top","right","left","bottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { ComposedChart, Bar, XAxis, YAxis, ResponsiveContainer, Tooltip, Legend, Line } from 'recharts';\r\nimport moment from 'moment'\r\nimport Axios from 'axios';\r\nimport ChartFilters from './ChartFilters';\r\nimport '../../styles/analytics.css'\r\nimport * as constant from '../Form/constant'\r\nimport Loader from '../Loader';\r\n\r\nconst dinamicRoute = (\r\n    window.location.host.includes(\"localhost\") ?\r\n        constant.LOCAL_GET : constant.PROD_GET\r\n)\r\n\r\nclass DynamicChart extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            data: [],\r\n            countBy: \"turtleCount\",\r\n            time: \"day\",\r\n        }\r\n        this.loadingData = true\r\n        this.dinamicRoute = props.dinamicRoute\r\n    }\r\n\r\n    convertDate = (date, group) => {\r\n        let fd\r\n        let newDate\r\n        if (group === \"day\") {\r\n            fd = date * (1000 * 60 * 60 * 24)\r\n            newDate = moment(fd).format(\"MMMM Do YYYY\")\r\n        } else if (group === \"month\") {\r\n            date = parseInt(date)\r\n            let addYear = Math.floor(date / 12)\r\n            let toMultiply = (date % 12) / 12\r\n            let year = 1970 + addYear\r\n            let month = (Math.ceil(toMultiply * 12)) + 1\r\n            newDate = month + \" \" + year\r\n        } else if (group === \"year\") {\r\n            newDate = JSON.parse(date) + 1970\r\n        } else if (group === \"week\") {\r\n            fd = date * (1000 * 60 * 60 * 24 * 7)\r\n            newDate = moment(fd).format('w YYYY')\r\n        }\r\n        return newDate\r\n    }\r\n\r\n    getRelevantData = async (filters) => {\r\n        if (!filters) { filters = {} }\r\n        const group = this.state.time\r\n        this.setState({ loadingData: true })\r\n        const response = await Axios.post(`${dinamicRoute}/formData/${group}`, filters)\r\n        setTimeout(() => { //for presentation only\r\n            this.setState({\r\n                data: response.data.map(d => {\r\n                    return { ...d, moonPhase: this.getMoonphases(d.moonPhase), date: this.convertDate(d.date, group) }\r\n                }), loadingData: false\r\n            })\r\n        }, 1500)\r\n    }\r\n    handleChange = async (e) => {\r\n        let data = [...this.state.data]\r\n        let name = e.target.name\r\n        let newData = data.splice(0) // Only for User Experience purposes (to force chart to reanimate)\r\n        await this.setState({ [name]: e.target.value, data: newData })\r\n        this.getRelevantData()\r\n    }\r\n\r\n    getMoonphases = (data) => {\r\n        let moonphase\r\n        if (data === \"Full Moon\") {\r\n            return moonphase = 4\r\n        } else if (data === \"Third Quarter\") {\r\n            return moonphase = 3\r\n        } else if (data === \"New Moon\") {\r\n            return moonphase = 2\r\n        } else if (data === \"First Quarter\") {\r\n            return moonphase = 1\r\n        } else {\r\n            return moonphase = null\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.getRelevantData()\r\n    }\r\n\r\n    render() {\r\n        let countOptions = [\"turtleCount\", \"nestCount\", \"eggCount\"]\r\n        let timeOptions = [\"day\", \"week\", \"month\", \"year\"]\r\n        let notShowingMoonPhases\r\n\r\n        return (\r\n            <div className=\"analytics-page\">\r\n\r\n                <div className=\"analytics-area\" style={{ width: '100vw', height: '70%' }} >\r\n                    <h3>Count: </h3>\r\n                    <select className=\"a-select\" id=\"countBy\" name=\"countBy\" value={this.state.countBy} onChange={this.handleChange}>\r\n                        {countOptions.map(o => <option value={o}>{o}</option>)}\r\n                    </select>\r\n                    <select className=\"a-select\" id=\"time\" name=\"time\" value={this.state.time} onChange={this.handleChange}>\r\n                        {timeOptions.map(o => <option value={o}>{o}</option>)}\r\n                    </select>\r\n\r\n                    {this.state.loadingData ? <Loader /> : null}\r\n\r\n                    <ResponsiveContainer width=\"100%\">\r\n                        <ComposedChart width={600} height={300} data={this.state.data}\r\n                            margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\r\n\r\n                            <XAxis dataKey=\"date\" stroke=\"black\" />\r\n                            <YAxis yAxisId=\"left\" orientation=\"left\" stroke=\"rgba(239, 221, 111)\" />\r\n                            {this.state.time === \"day\" ?\r\n                                <YAxis yAxisId=\"right\" orientation=\"right\" stroke=\"#81C14B\" />\r\n                                : notShowingMoonPhases = true\r\n                            }\r\n                            <Tooltip />\r\n                            <Legend color=\"#FFFFFF\" />\r\n                            <Bar yAxisId=\"left\" dataKey={this.state.countBy} fill=\"rgba(239, 221, 111, 0.8)\" />\r\n                            {this.state.time === \"day\" ?\r\n                                <Line strokeWidth={4} stroke=\"rgba(129, 193, 75, 0.7)\" type=\"monotone\" yAxisId=\"right\" dataKey=\"moonPhase\" fill=\"#82ca9d\" />\r\n\r\n                                : notShowingMoonPhases = true\r\n                            }\r\n                        </ComposedChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n\r\n                <ChartFilters getRelevantData={this.getRelevantData} />\r\n\r\n\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DynamicChart;"]},"metadata":{},"sourceType":"module"}